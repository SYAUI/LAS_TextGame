# LAS 文字游戏设计手册
## 内置变量与结构
>此内容为引擎内部结构，如想查看如何编写关卡脚本，请跳至`“关卡语法”`章节。
### 核心全局变量：
`data`：虚拟数据段，不可扩充。功能用于存放载入游戏关卡文件中所定义的变量，由重写new分配入data所开辟空间内。

`map_src`：存储游戏关卡脚本源码。

### 内置函数：

`InitGame(分配内存大小)`：游戏初始化函数，将开辟一片内存作为游戏运行时的沙盒内存使用。

`LoadGameLevel(文件路径)`：用于载入地图文件，如果执行时不提供地图路径，则默认加载目录中名为`map_main.tgl`的文件作为启动入口。

## 关卡语法：脚本模式
>文件类型后缀名为`.tgs`的文件将被当作纯脚本文件执行。

### 文本标签：

用于文本元素与结构，通过`< >`进行包裹。


### 变量类型：

请注意，在定义变量时，必须为纯英文字母组成，且不得使用关键字做变量名。

`bool`：布尔值变量，只接受true与false。

`num`：数字类型变量，默认存储任何类型数字为双精度浮点值。如果您并不喜欢这样，可以修改配置文件让引擎根据是否拥有小数被存储为整数或双精度浮点值。

`string`：字符串型变量，存储文本数据。

### 函数语句：

`if` `else`：判断语句，当条件为真时执行。
```c
//例子，当数字变量i大于0时赋值1，否则赋值2。
{
    if(i > 0) i = 1
    else i = 2
}
```

`choose`：多分支选择语句，当选择后会执行相应的选项。

```
{
    choose 这是一个选项标题
    
}
```
`print`:自动读取括号内的一切文本，并识别其中`文本标签`(请参阅文本标签章节)。

```python
print{
    剧情文本A
    剧情文本B
}
```

`goto`：无条件跳转至对应行数执行。**警告：此功能可能会造成意料之外的结果！**

### 文本标签：

\<b>__粗体文本__\</b>

\<i>*斜体文本*\</i>

\<br>换行符

## 关卡语法：混合脚本模式（实验性）
>混合脚本为一类特殊脚本文件，后缀名为`.tgl`。文件中脚本代码与文本段共存。

>在运行过程中，当段首存在`*`符号时，直至第一个空格之前都将被视为代码指令，否则，则输出文本。

>如想输入文本“*”号，请使用`\*`。

>如若想声明复杂代码块，请使用`{ }`括住。  
当引擎读至此时，将直接视结束前全部段落为代码块，因而不需在括号内添加`*`号。

代码：
```c
这是第一句话
*string text = 这是被赋值的变量
这是第二句话
*{
    int a = 1
    a = a + 1
}
这是第三句话
这是a的结果值：<a>
这是text的内容：<text>
```
输出内容：

    这是第一句话
    这是第二句话
    这是第三句话
    这是结果值：1
    这是text的内容：这是被赋值的变量
